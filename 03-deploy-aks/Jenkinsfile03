pipeline {
    agent any
    stages {
        stage('Deploy image') {
            steps {
                sh "docker login -u ${params.DOCKER_USER} -p ${DOCKER_PASSWORD}"
                sh "az login --service-principal --username ${params.ClientID} --password ${params.SecretID} --tenant ${params.TenantID}"
                sh "az aks get-credentials --name akseu2 --resource-group jenkins"
                sh "kubectl scale --replicas=0 deployment application"
                sh "kubectl scale --replicas=1 deployment application"
            }
        }
    }
}